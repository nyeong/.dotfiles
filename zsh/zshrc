#!/bin/zsh

# GPG setup
export GPG_TTY=$(tty)

# p10k init
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi


# zinit fallback
if [[ ! -d ~/.zinit ]]; then
  echo "zinit can not be loaded"
fi

source ~/.zinit/bin/zinit.zsh

autoload -Uz _zinit
(( ${+_comps} )) && _comps[zinit]=_zinit

# p10k
zinit ice depth=1;
zinit light romkatv/powerlevel10k

# auto suggestion
ZSH_AUTOSUGGEST_USE_ASYNC=1
zinit light zsh-users/zsh-autosuggestions

# expand aliases
ZSH_EXPAND_ALL_DISABLE=word
zinit light simnalamburt/zsh-expand-all

zinit light zdharma/fast-syntax-highlighting
zinit light zsh-users/zsh-history-substring-search
# bind up-arrow and down-arrow
bindkey '^[[A' history-substring-search-up
bindkey '^[[B' history-substring-search-down

# tap completion
zinit light zsh-users/zsh-completions
autoload -Uz compinit bashcompinit
compinit
bashcompinit
zinit cdreplay


# make menu looks lincer
zstyle ':completion:*' menu select
zstyle ':completion:*' list-colors "${(s.:.)LS_COLORS}"

export TIME_STYLE='long-iso'

# load extra configs
for file in ~/.dotfiles/zsh/*.zsh; do . $file; done
[[ -d ~/.local/bin ]] && export PATH=$PATH:~/.local/bin/
